{"version":3,"file":"public/javascripts/app.js","sources":["app/application.js","app/initialize.js","app/lib/router.js","app/lib/view_helper.js","app/models/cart.js","app/models/carts.js","app/models/collection.js","app/models/model.js","app/models/product.js","app/models/products.js","app/models/receipt.js","app/models/receipts.js","app/models/recipe.js","app/models/recipes.js","app/models/to_cook.js","app/views/cart.js","app/views/carts.js","app/views/home.js","app/views/kitchen.js","app/views/product.js","app/views/products.js","app/views/receipt.js","app/views/receipts.js","app/views/recipe.js","app/views/recipes.js","app/views/templates/cart.jade","app/views/templates/carts-recipes.jade","app/views/templates/carts.jade","app/views/templates/home.jade","app/views/templates/kitchen.jade","app/views/templates/product.jade","app/views/templates/products.jade","app/views/templates/receipt-detail.jade","app/views/templates/receipt.jade","app/views/templates/receipts.jade","app/views/templates/recipe.jade","app/views/templates/recipes.jade","app/views/templates/to_cooks.jade","app/views/to_cook.js","app/views/to_cooks.js","app/views/view.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AANA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;A,CCAA;;AACA;AADA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AAHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AALA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3JA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;A","sourcesContent":["// Application bootstrapper.\nvar Application = {\n    initialize: function () {\n        var HomeView = require('views/home'), Router = require('lib/router');\n        this.homeView = new HomeView();\n        this.router = new Router();\n        if (typeof Object.freeze === 'function') {\n            Object.freeze(this);\n        }\n    }\n};\n\nmodule.exports = Application;\n","var application = require('application');\n\n$(function () {\n  application.initialize();\n  Backbone.history.start();\n});\n","var application = require(\"application\");\n\nmodule.exports = Backbone.Router.extend({\n    routes: {\n        \"\": \"home\"\n    },\n\n    home: function () {\n        $(\"body\").html(application.homeView.render().el);\n    }\n});\n","// Put your handlebars.js helpers here.\n","var Model = require(\"./model\");\n\nmodule.exports = Model.extend({\n    \"urlRoot\": \"carts\"\n});\n","var Collection = require(\"./collection\"),\n    Cart       = require(\"./cart\");\n\nmodule.exports = Collection.extend({\n    \"model\": Cart,\n    \"url\": \"carts\"\n});\n","// Base class for all collections.\nmodule.exports = Backbone.Collection.extend({\n});\n","// Base class for all models.\nmodule.exports = Backbone.Model.extend({\n});\n","var Model = require(\"./model\");\n\nmodule.exports = Model.extend({\n    \"urlRoot\": \"products\"\n});\n","var Collection = require(\"./collection\"),\n    Product    = require(\"./product\");\n\nmodule.exports = Collection.extend({\n    \"model\": Product,\n    \"url\": \"products\"\n});\n","var Model = require(\"./model\");\n\nmodule.exports = Model.extend({\n    \"urlRoot\": \"receipts\"\n});\n","var Collection = require(\"./collection\"),\n    Receipt    = require(\"./receipt\");\n\nmodule.exports = Collection.extend({\n    \"model\": Receipt,\n    \"url\": \"receipts\"\n});\n","var Model = require(\"./model\");\n\nmodule.exports = Model.extend({\n    \"urlRoot\": \"recipes\"\n});\n","var Collection = require(\"./collection\"),\n    Recipe     = require(\"./recipe\");\n\nmodule.exports = Collection.extend({\n    \"model\": Recipe,\n    \"url\": \"recipes\"\n});\n","var Collection = require(\"./collection\"),\n    Recipe     = require(\"./recipe\");\n\nmodule.exports = Collection.extend({\n    \"model\": Recipe,\n    \"url\": \"recipes/to-cook\"\n});\n","var View     = require(\"./view\"),\n    Cart     = require(\"../models/cart\"),\n    template = require(\"./templates/cart\");\n\nmodule.exports = View.extend({\n    \"tagName\": \"li\",\n    \"className\": \"cart col-xs-4\",\n    \"template\": template,\n\n    \"model\": Cart,\n\n    \"getRenderData\": function () { \n        var attributes = this.model.attributes;\n        return attributes;\n    },\n\n    \"initialize\": function () {\n        this.render();\n    },\n\n    \"events\": {\n        \"click .delete\": \"destroy\",\n    },\n\n    \"destroy\": function () {\n        var that = this;\n\n        that.model.destroy({\n            \"success\": function () {\n                that.remove();\n            }\n        });\n    },\n\n});\n\n","var View            = require(\"./view\"),\n    Cart            = require(\"../models/cart\"),\n    Carts           = require(\"../models/carts\"),\n    CartView        = require(\"./cart\"),\n    template        = require(\"./templates/carts\"),\n    templateRecipes = require(\"./templates/carts-recipes\");\n\nmodule.exports = View.extend({\n    \"collection\": Carts,\n    \n    \"template\": template,\n    \"templateRecipes\": templateRecipes,\n\n    \"initialize\": function (params) {\n        this.recipes = params.recipes.models;\n    },\n\n    \"getRenderData\": function () {\n        return { \"recipes\": this.recipes }\n    },\n\n    \"render\": function () {\n        var data = this.getRenderData();\n\n        this.$el.html(this.template(data));\n        this.collection.each(function (cart){\n            this.add(cart);\n        }, this);\n        this.updateRender(data);\n    },\n\n    \"updateRender\": function (data) {\n        var data = data || this.getRenderData();\n        // TODO : check already checked recipes\n        this.$el.find(\".carts-recipes\").html(this.templateRecipes(data));\n    },\n\n    \"add\": function (cart) {\n        var cartView = new CartView({ \"model\": cart });\n        this.$el.find(\"ul.carts\").prepend(cartView.el)\n    },\n\n    \"events\": {\n        \"click .recipe\": \"updateCart\",\n        \"click .order\": \"order\",\n    },\n\n    \"findRecipe\": function (recipeName) {\n        return _(this.recipes).find(function (recipe) { \n            return $.trim(recipe.get(\"name\")) == $.trim(recipeName);\n        });\n    },\n\n    \"checkedProducts\": {},\n\n    \"addProductsToCart\": function (products) {\n        // TODO: quantity of products and same product in diff recipe\n        _(products).each(function (product) {\n            var productContainer = $(\"<div class='product' />\");\n            productContainer.html(product.id);\n            this.checkedProducts[product.id] = productContainer;\n            $(\"#shop .products\").append(productContainer);\n        }, this);\n    },\n\n    \"removeProductsFromCart\": function (products) {\n        _(products).each(function (product) {\n            $(this.checkedProducts[product.id]).remove();\n            delete this.checkedProducts[product.id];\n        }, this);\n    },\n\n    \"updateCart\": function (evt) {\n        var $target    = $(evt.currentTarget),\n            $button    = $target.find(\".btn\"),\n            recipeName = $target.find(\".name\").text(),\n            recipe,\n            products;\n\n        recipe   = this.findRecipe(recipeName);\n        products = recipe.get(\"products\");\n\n        $button.toggleClass(\"glyphicon-unchecked\");\n        $button.toggleClass(\"glyphicon-check\");\n\n        if ($button.hasClass(\"glyphicon-check\")) {\n            this.addProductsToCart(products);\n        } else {\n            this.removeProductsFromCart(products);\n        }\n    },\n\n    \"order\": function (evt) {\n        var checked      = $(\"#shop .recipe .glyphicon-check\"),\n            that         = this,\n            recipesNames = [],\n            cart;\n\n        checked.parents(\".recipe\").find(\".name\").each(function (index, elem) {\n            recipesNames.push($(elem).text());\n        });\n        cart = new Cart ({\n            \"name\": \"Commande : \" + recipesNames.join(\", \"),\n             \"products\": Object.keys(this.checkedProducts)\n            // TODO: quantity of products and same product in diff recipe\n        });\n\n        that.collection.create(cart, {\n            \"success\": function (cart) {\n                _(recipesNames).each(function (recipeName) {\n                    console.log(recipeName)\n                    var recipe = that.findRecipe(recipeName);\n                    console.log(recipe)\n                    recipe.save({ \"toCook\": true });\n                });\n                that.add(cart);\n            }\n        });\n    }\n});\n","var View         = require(\"./view\"),\n    Carts        = require(\"../models/carts\"),\n    CartsView    = require(\"./carts\"),\n    Products     = require(\"../models/products\"),\n    ProductsView = require(\"./products\"),\n    Receipts     = require(\"../models/receipts\"),\n    ToCook       = require(\"../models/to_cook\"),\n    KitchenView  = require(\"./kitchen\"),\n    Recipes      = require(\"../models/recipes\"),\n    RecipesView  = require(\"./recipes\"),\n    template     = require(\"./templates/home\");\n\nmodule.exports = View.extend({\n    \"id\": \"home-view\",\n    \"template\": template,\n\n    \"events\": {\n        \"click .menu\": \"goMenu\",\n        \"click .menu .shop\": \"goShop\",\n        \"click .menu .fridge\": \"goFridge\",\n        \"click .menu .kitchen\": \"goKitchen\",\n        \"click .menu .recipes\": \"goRecipes\",\n    },\n\n    \"afterRender\": function () {\n        this.carts = new Carts();\n        this.carts.fetch({\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n\n        this.products = new Products();\n        this.products.fetch({\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n\n        this.recipes = new Recipes();\n        this.recipes.fetch({\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n\n        this.toCook = new ToCook();\n        this.toCook.fetch({\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n\n        this.receipts = new Receipts();\n        this.receipts.fetch({\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n    },\n\n    \"swipers\": {},\n\n    \"goPage\": function (pageName) {\n        var that = this, \n            pageClass = \".\" + pageName;\n\n        $(\"#content\").removeClass();\n        $(\"#content\").addClass(pageName);\n\n        if (!that.swipers[pageName] && pageName !== \"menu\") {\n            that.swipers[pageName] = $(\".swiper-container:visible\").swiper({\n                \"loop\": false,\n                \"grabCursor\": true,\n                \"pagination\": pageClass + \"> .pagination\",\n                \"paginationClickable\": true,\n                \"keyboardControl\": true,\n            });\n            $(pageClass + \"> .navigation.left\").on(\"click\", function (evt) {\n                evt.preventDefault()\n                that.swipers[pageName].swipePrev()\n            });\n            $(pageClass + \"> .navigation.right\").on(\"click\", function (evt) {\n                evt.preventDefault()\n                that.swipers[pageName].swipeNext()\n            });\n        } \n    },\n\n    \"goShop\": function () {\n        if (!this.cartsView) {\n            this.cartsView = new CartsView({ \n                \"el\": $(\"#shop\")[0],\n                \"collection\": this.carts,\n                \"recipes\": this.recipes\n            });\n            this.cartsView.render();\n        } else {\n            this.cartsView.updateRender();\n        }\n        this.goPage(\"shop\");\n\n        return false;\n    },\n\n    \"goFridge\": function () {\n        if (!this.productsView) {\n            this.productsView = new ProductsView({ \n                \"el\": $(\"#fridge\")[0],\n                \"collection\": this.products\n            });\n        }\n        this.productsView.render();\n        this.goPage(\"fridge\");\n\n        return false;\n    },\n\n    \"goKitchen\": function () {\n        if (!this.kitchenView) {\n            this.kitchenView = new KitchenView({ \n                \"el\": $(\"#kitchen\")[0],\n                \"receipts\": this.receipts,\n                \"toCook\": this.toCook\n            });\n            this.kitchenView.render();\n        } else {\n            this.kitchenView.updateRender(this.swipers[\"kitchen\"]);\n        }\n        this.goPage(\"kitchen\");\n\n        return false;\n    },\n\n    \"goRecipes\": function () {\n        if (!this.recipesView) {\n            this.recipesView = new RecipesView({ \n                \"el\": $(\"#recipes\")[0],\n                \"collection\": this.recipes,\n                \"products\": this.products\n            });\n        }\n        this.recipesView.render();\n        this.goPage(\"recipes\");\n\n        return false;\n    },\n\n    \"goMenu\": function () {\n        this.goPage(\"menu\");\n\n        return false;\n    }\n\n});\n","var View         = require(\"./view\"),\n    Receipts     = require(\"../models/receipts\"),\n    ReceiptsView = require(\"./receipts\"),\n    ToCooksView  = require(\"./to_cooks\"),\n    template     = require(\"./templates/kitchen\");\n\nmodule.exports = View.extend({\n    \"id\": \"kitchen\",\n    \"template\": template,\n\n    \"initialize\": function (params) {\n        this.receipts = params.receipts;\n        this.toCook   = params.toCook;\n\n        this.receiptsView = new ReceiptsView({ \n            \"el\": $(\"#receipts\")[0],\n            \"collection\": this.receipts\n        });\n        this.toCooksView = new ToCooksView({ \n            \"el\": $(\"#recipes-to-cook\")[0],\n            \"collection\": this.toCook\n        });\n    },\n\n    \"render\": function () {\n        this.$el.html(this.template());\n\n        this.receiptsView.render();\n        this.$el.append(this.receiptsView.el);\n        this.toCooksView.render();\n        this.$el.append(this.toCooksView.el);\n    },\n\n    \"updateRender\": function (swiper) {\n        this.receiptsView.updateRender();\n        this.toCooksView.updateRender();\n    },\n});\n","var View     = require(\"./view\"),\n    Product  = require(\"../models/product\"),\n    template = require(\"./templates/product\");\n\nmodule.exports = View.extend({\n    \"tagName\": \"li\",\n    \"className\": \"row product\",\n    \"template\": template,\n\n    \"model\": Product,\n\n    \"getRenderData\": function () { \n        var attributes = this.model.attributes;\n        if (!attributes.image) {\n            attributes.image = \"images/product.png\";\n        }\n        return attributes;\n    },\n\n    \"initialize\": function () {\n        this.render();\n    },\n\n    \"events\": {\n        \"click .delete\": \"destroy\",\n        \"click .plus\": \"plus\",\n        \"click .minus\": \"minus\",\n    },\n\n    \"destroy\": function () {\n        var that = this;\n\n        $(\"#product-image\")\n            .val(that.$el.find(\".image img\").attr(\"src\"));\n        $(\"#product-name\").val(that.$el.find(\".name\").text());\n        $(\"#product-quantity\").val(that.$el.find(\".quantity\").text());\n        $(\"#product-price\").val(that.$el.find(\".price\").text());\n\n        that.model.destroy({\n            \"success\": function () {\n                that.remove();\n            }\n        });\n    },\n\n    \"plus\": function () {\n        var that = this;\n\n        that.model.save({ \"quantity\": this.model.get(\"quantity\") + 1 }, {\n            \"success\": function (product) {\n                that.render();\n            },\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n    },\n\n    \"minus\": function () {\n        var that = this;\n\n        that.model.save({ \"quantity\": this.model.get(\"quantity\") - 1 }, {\n            \"success\": function (product) {\n                that.render();\n            },\n            \"error\": function (obj, response) {\n                console.log(response.responseText)\n            }\n        });\n    }\n});\n\n","var View        = require(\"./view\"),\n    Product     = require(\"../models/product\"),\n    Products    = require(\"../models/products\"),\n    ProductView = require(\"./product\"),\n    template    = require(\"./templates/products\");\n\nmodule.exports = View.extend({\n    \"collection\": Products,\n    \n    \"template\": template,\n\n    \"render\": function () {\n        this.$el.html(this.template(this.getRenderData()));\n        this.oldProducts = this.$el.find(\"ul.products.old\");\n        this.newProducts = this.$el.find(\"ul.products.new\");\n        this.collection.each(function (product){\n            this.add(product, this.oldProducts);\n        }, this);\n        this.searchList = new List(this.$el.find(\".products-list\")[0], \n                                   { \"valueNames\": [\"name\", \n                                                    \"price\", \n                                                    \"quantity\"] });\n    },\n\n    \"add\": function (product, list) {\n        var productView = new ProductView({ \"model\": product });\n        if (!list) {\n            list = this.newProducts;\n        }\n        list.prepend(productView.el);\n    },\n\n    \"events\": {\n        \"submit form\": \"addProduct\",\n        \"click .old .delete\": \"removeFromList\"\n    },\n\n    \"addProduct\": function (evt) {\n        var $form = $(evt.target),\n            product = new Product ({\n                \"name\": $(\"#product-name\").val(),\n                \"quantity\": $(\"#product-quantity\").val(),\n                \"price\": $(\"#product-price\").val(),\n                \"image\": $(\"#product-image\").val()\n            }),\n            that = this;\n\n        if (!product.get(\"image\")) {\n            product.set(\"image\", \"images/product.png\");\n        }\n        this.collection.create(product, {\n            \"success\": function (product) {\n                that.add(product);\n                $(\"#product-name\").val(\"\");\n                $(\"#product-quantity\").val(\"\");\n                $(\"#product-price\").val(\"\");\n                $(\"#product-image\").val(\"\");\n            }\n        });\n\n        return false;\n    },\n\n    \"removeFromList\": function (evt) {\n        var productName = $(evt.target).parents(\"li\").find(\".name\").text();\n        this.searchList.remove(\"name\", $.trim(productName));\n    }\n});\n","var View           = require(\"./view\"),\n    Receipt        = require(\"../models/receipt\"),\n    template       = require(\"./templates/receipt\"),\n    templateDetail = require(\"./templates/receipt-detail\");\n\nmodule.exports = View.extend({\n    \"tagName\": \"li\",\n    \"className\": \"row receipt\",\n    \"template\": template,\n    \"templateDetail\": templateDetail,\n\n    \"model\": Receipt,\n\n    \"initialize\": function () {\n        this.render();\n    },\n\n    \"getRenderData\": function () { \n        var attributes = this.model.attributes;\n        attributes.date = new Date(attributes.timestamp).toString(\"d/M/yyyy\");\n        return attributes;\n    },\n\n    \"render\": function () {\n        this.$el.html(this.template(this.getRenderData()));\n    },\n\n    \"events\": {\n        \"click .validate\": \"validate\",\n        \"click\": \"details\"\n    },\n\n    \"details\": function () {\n        var that = this;\n        if (that.$el.find(\".details\").length) {\n            that.$el.find(\".details\").remove();\n        } else {\n            this.model.fetch({ \n                \"success\": function (detailed) {\n                    var $ul = $(\"<ul class='details' />\"),\n                        $li,\n                        detail,\n                        details,\n                        i;\n                    that.$el.append($ul);\n                    details = detailed.get(\"details\");\n                    for (i = 0; i < details.length; i++) {\n                        detail = details[i];\n                        if (!detail.label) {\n                            detail.label = \"\";\n                        }\n                        $ul.append(that.templateDetail(details[i]));\n                    }\n                }\n            });\n        }\n    },\n\n    \"validate\": function () {\n        console.log(\"validate\")\n        return false;\n    }\n});\n\n","var View        = require(\"./view\"),\n    Receipt     = require(\"../models/receipt\"),\n    Receipts    = require(\"../models/receipts\"),\n    ReceiptView = require(\"./receipt\"),\n    template    = require(\"./templates/receipts\");\n\nmodule.exports = View.extend({\n    \"collection\": Receipts,\n    \n    \"template\": template,\n\n    \"render\": function () {\n        this.$el.html(this.template(this.getRenderData()));\n        this.receiptsList = this.$el.find(\"ul.receipts\");\n        this.collection.each(function (receipt){\n            this.add(receipt);\n        }, this);\n    },\n\n    \"updateRender\": function (swiper) {\n        console.log(\"this is a prototype, recepts list doesnt update\")\n    },\n\n    \"add\": function (receipt) {\n        var receiptView = new ReceiptView({ \"model\": receipt });\n        this.receiptsList.prepend(receiptView.el);\n    },\n});\n","var View     = require(\"./view\"),\n    Recipe   = require(\"../models/recipe\"),\n    template = require(\"./templates/recipe\");\n\nmodule.exports = View.extend({\n    \"tagName\": \"li\",\n    \"className\": \"row recipe\",\n    \"template\": template,\n\n    \"model\": Recipe,\n\n    \"getRenderData\": function () { \n        var attributes = this.model.attributes;\n        if (!attributes.image) {\n            attributes.image = \"images/recipe.png\";\n        }\n        if (attributes.description) {\n            attributes.description = \n                attributes.description.replace(/[\\r\\n]+/g, \"<br>\");\n        }\n        return attributes;\n    },\n\n    \"initialize\": function () {\n        this.render();\n    },\n\n    \"events\": {\n        \"click .delete\": \"destroy\",\n    },\n\n    \"destroy\": function () {\n        var that = this,\n            $recipesProducts = $(\"#recipe-products\");\n\n        $(\"#recipe-image\")\n            .val(that.$el.find(\".image img\").attr(\"src\"));\n        $(\"#recipe-name\").val(that.$el.find(\".name\").text());\n        console.log()\n        $(\"#recipe-description\")\n            .val(that.$el.find(\".description\")\n                    .html()\n                    .replace(/<br>/gi, \"\\n\"));\n\n        $recipesProducts.find(\"options:selected\").prop(\"selected\", false);\n        that.$el.find(\".recipe-products li\").each(function () {\n            $recipesProducts.find(\"option[value=\" + $(this).text() + \"]\")\n                .prop(\"selected\", true);\n        });\n        $(\".select-picker\").selectpicker(\"refresh\");\n\n        that.model.destroy({\n            \"success\": function () {\n                that.remove();\n            }\n        });\n    }\n});\n\n","var View       = require(\"./view\"),\n    Recipe     = require(\"../models/recipe\"),\n    Recipes    = require(\"../models/recipes\"),\n    RecipeView = require(\"./recipe\"),\n    template   = require(\"./templates/recipes\");\n\nmodule.exports = View.extend({\n    \"collection\": Recipes,\n    \n    \"template\": template,\n\n    \"initialize\": function (params) {\n        this.products = params.products.models;\n    },\n\n    \"getRenderData\": function () {\n        return { \"products\": this.products };\n    },\n\n    \"render\": function () {\n        this.$el.html(this.template(this.getRenderData()));\n        this.$el.find(\".select-picker\").selectpicker({\n            \"title\": \"aucun produit\",\n            \"noneResultsText\": \"aucun produit contenant\"\n        });\n        this.collection.each(function (recipe){\n            this.add(recipe);\n        }, this);\n    },\n\n    \"add\": function (recipe) {\n        var recipeView = new RecipeView({ \"model\": recipe });\n        this.$el.find(\"ul.recipes\").prepend(recipeView.el)\n    },\n\n    \"events\": {\n        \"submit form\": \"addRecipe\",\n    },\n\n    \"addRecipe\": function (evt) {\n        var $form = $(evt.target),\n            recipe = new Recipe ({\n                \"name\": $(\"#recipe-name\").val(),\n                \"description\": $(\"#recipe-description\").val(),\n                \"products\": $(\"#recipe-products\").val(),\n                \"image\": $(\"#recipe-image\").val(),\n                \"toCook\": false\n            }),\n            that = this;\n\n        if (!recipe.get(\"image\")) {\n            recipe.image = \"images/recipe.png\";\n        }\n        that.collection.create(recipe, {\n            \"success\": function (recipe) {\n                that.add(recipe);\n            }\n        });\n\n        return false;\n    },\n\n});\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<span title=\"supprimer\" class=\"delete\"><button class=\"btn btn-danger glyphicon glyphicon-remove\"></button></span><span class=\"name\">' + escape((interp = name) == null ? '' : interp) + '</span><ul>');\n// iterate products\n;(function(){\n  if ('number' == typeof products.length) {\n    for (var $index = 0, $$l = products.length; $index < $$l; $index++) {\n      var product = products[$index];\n\nbuf.push('<li class=\"product\">' + escape((interp = product.id) == null ? '' : interp) + ' </li>');\n    }\n  } else {\n    for (var $index in products) {\n      var product = products[$index];\n\nbuf.push('<li class=\"product\">' + escape((interp = product.id) == null ? '' : interp) + ' </li>');\n   }\n  }\n}).call(this);\n\nbuf.push('</ul>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n// iterate recipes\n;(function(){\n  if ('number' == typeof recipes.length) {\n    for (var $index = 0, $$l = recipes.length; $index < $$l; $index++) {\n      var recipe = recipes[$index];\n\nbuf.push('<div class=\"recipe\"> <span class=\"name\">' + escape((interp = recipe.attributes.name) == null ? '' : interp) + '<div class=\"btn glyphicon glyphicon-unchecked\"> </div></span></div>');\n    }\n  } else {\n    for (var $index in recipes) {\n      var recipe = recipes[$index];\n\nbuf.push('<div class=\"recipe\"> <span class=\"name\">' + escape((interp = recipe.attributes.name) == null ? '' : interp) + '<div class=\"btn glyphicon glyphicon-unchecked\"> </div></span></div>');\n   }\n  }\n}).call(this);\n\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"navigation left\"></div><div class=\"swiper-container\"><div class=\"swiper-wrapper\"><div class=\"swiper-slide\"> <h2>Information de consomation</h2></div><div class=\"swiper-slide\"> <h2>Choix des catégories</h2></div><div class=\"swiper-slide\"> <h2>Choix du prix</h2></div><div class=\"swiper-slide\"> <h2>Choix de la recette</h2><div class=\"carts-recipes\"></div></div><div class=\"swiper-slide carts\"><h2>Panier</h2><div class=\"products\"></div><hr/><div class=\"btn btn-primary order\">Commander</div><hr/><h2>Commandes en cours</h2><ul class=\"carts row\"></ul></div></div></div><div class=\"navigation right\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"content\" class=\"menu\"><div class=\"header\"><div class=\"menu\"><a class=\"menu\"><img src=\"images/title.png\" alt=\"aliventaire\" title=\"Aliventaire\"/></a></div><div class=\"shop\"><a href=\"/\" class=\"menu\"><img src=\"images/shop.png\" alt=\"shop\" title=\"Retour au menu\" class=\"menu\"/></a><h1>Mes courses</h1><div class=\"pagination\"></div></div><div class=\"fridge\"><a href=\"/\" class=\"menu\"><img src=\"images/fridge.png\" alt=\"fridge\" title=\"Retour au menu\" class=\"menu\"/></a><h1>Mon placard</h1><div class=\"pagination\"></div></div><div class=\"kitchen\"><a href=\"/\" class=\"menu\"><img src=\"images/kitchen.png\" alt=\"kitchen\" title=\"Retour au menu\" class=\"menu\"/></a><h1>Ma cuisine</h1><div class=\"pagination\"></div></div><div class=\"recipes\"><a href=\"/\" class=\"menu\"><img src=\"images/recipes.png\" alt=\"recipes\" title=\"Retour au menu\" class=\"menu\"/></a><h1>Mes recettes</h1><div class=\"pagination\"></div></div></div><div class=\"page\"><div class=\"menu\"><div class=\"row\"><a href=\"/\" class=\"shop\"><img src=\"images/shop.png\" alt=\"shop\" title=\"Mes courses\" class=\"shop\"/></a><a href=\"/\" class=\"fridge\"><img src=\"images/fridge.png\" alt=\"fridge\" title=\"Mon placard\" class=\"fridge\"/></a></div><div class=\"row\"><a href=\"/\" class=\"kitchen\"><img src=\"images/kitchen.png\" alt=\"kitchen\" title=\"Ma cuisine\" class=\"kitchen\"/></a><a href=\"/\" class=\"recipes\"><img src=\"images/recipes.png\" alt=\"recipes\" title=\"Mes recettes\" class=\"recipes\"/></a></div></div><div id=\"shop\" class=\"shop\"></div><div id=\"fridge\" class=\"fridge\"></div><div id=\"kitchen\" class=\"kitchen\"></div><div id=\"recipes\" class=\"recipes\"></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"kitchen\"><div class=\"navigation left\"></div><div class=\"swiper-container\"><div class=\"swiper-wrapper\"><div class=\"swiper-slide\"> <h2>Tickets de caisse</h2><div id=\"receipts\"></div></div><div class=\"swiper-slide\"> <h2>Recette à cuisiner</h2><div id=\"recipes-to-cook\"></div></div></div></div><div class=\"navigation right\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div title=\"supprimer\" class=\"delete col-xs-1\"><button class=\"btn btn-danger\"><span class=\"glyphicon glyphicon-remove\"></span></button></div><div class=\"image col-xs-1\"> <img');\nbuf.push(attrs({ 'src':(\"\" + (image) + \"\"), 'alt':(\"image\"), 'title':(\"\" + (name) + \"\") }, {\"src\":true,\"alt\":true,\"title\":true}));\nbuf.push('/></div><div class=\"name col-xs-5\">' + escape((interp = name) == null ? '' : interp) + '</div><div class=\"price col-xs-2\">' + escape((interp = price) == null ? '' : interp) + '</div><div class=\"quantity col-xs-3\">' + escape((interp = quantity) == null ? '' : interp) + '<span class=\"actions\"><button class=\"minus btn btn-default\"><span class=\"glyphicon glyphicon-minus\"></span></button><button class=\"plus btn btn-default\"><span class=\"glyphicon glyphicon-plus\"></span></button></span></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<form role=\"form\" class=\"form-inline\"><div class=\"row\"><div class=\"form-group col-xs-7\"><input id=\"product-name\" type=\"text\" required=\"required\" placeholder=\"Produit\" class=\"form-control\"/></div><div class=\"form-group col-xs-2\"><input id=\"product-price\" type=\"text\" required=\"required\" pattern=\"[0-9]+(.[0-9]+)?\" title=\"le prix unitaire de ce produit (ex: 3.2)\" placeholder=\"Prix unitaire\" class=\"form-control\"/></div><div class=\"form-group col-xs-2\"><input id=\"product-quantity\" type=\"text\" pattern=\"[0-9]+\" title=\"le nombre de produits de ce type\" placeholder=\"Quantité\" class=\"form-control\"/></div><div class=\"col-xs-1\"><button type=\"submit\" title=\"ajouter\" class=\"btn btn-default\"><span class=\"glyphicon glyphicon-plus\"></span></button></div></div><div class=\"row\"><div class=\"form-group col-xs-11\"><input id=\"product-image\" type=\"text\" placeholder=\"adresse de l\\'image\" class=\"form-control\"/></div></div></form><div class=\"products-list\"><ul class=\"products new\"></ul><hr/><div class=\"row\"><div class=\"form-group col-xs-10 col-xs-offset-2\"><input type=\"text\" placeholder=\"filtrer\" class=\"search form-control\"/></div></div><div class=\"row\"><button title=\"trier par nom\" data-sort=\"name\" class=\"sort btn btn-default col-xs-5 col-xs-offset-2\"><span class=\"glyphicon glyphicon-sort\"></span>nom</button><button title=\"trier par prix\" data-sort=\"price\" class=\"sort btn btn-default col-xs-2\"> <span class=\"glyphicon glyphicon-sort\"></span>prix</button><button title=\"trier par quantité\" data-sort=\"quantity\" class=\"sort btn btn-default col-xs-3\"> <span class=\"glyphicon glyphicon-sort\"></span>quantité</button></div><ul class=\"products old list\"></ul></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<li class=\"row\"><span class=\"col-xs-1\">' + escape((interp = amount) == null ? '' : interp) + '</span><span class=\"col-xs-8\">' + escape((interp = label) == null ? '' : interp) + '</span><span class=\"col-xs-3\">' + escape((interp = price) == null ? '' : interp) + '</span></li>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"transaction col-xs-3\">' + escape((interp = date) == null ? '' : interp) + '</div><div class=\"receipt-id col-xs-3\">' + escape((interp = receiptId) == null ? '' : interp) + '</div><div class=\"total col-xs-3\">' + escape((interp = total) == null ? '' : interp) + '</div><div title=\"valider\" class=\"validate col-xs-3\"><button class=\"btn btn-info\"><span class=\"glyphicon glyphicon-check\"></span></button></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<ul class=\"receipts\"></ul>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"image col-xs-3\"> <img');\nbuf.push(attrs({ 'src':(\"\" + (image) + \"\"), 'alt':(\"image\"), 'title':(\"\" + (name) + \"\") }, {\"src\":true,\"alt\":true,\"title\":true}));\nbuf.push('/></div><div class=\"col-xs-8\"> <div class=\"name\"> <span title=\"supprimer\" class=\"delete\"><button class=\"btn btn-danger\"><span class=\"glyphicon glyphicon-remove\"></span></button></span><span>' + escape((interp = name) == null ? '' : interp) + '</span></div><div class=\"description\">' + ((interp = description) == null ? '' : interp) + '</div><hr/><div class=\"recipe-products\">Produits :<ul>');\n// iterate products\n;(function(){\n  if ('number' == typeof products.length) {\n    for (var $index = 0, $$l = products.length; $index < $$l; $index++) {\n      var product = products[$index];\n\nbuf.push('<li>' + escape((interp = product.id) == null ? '' : interp) + '</li>');\n    }\n  } else {\n    for (var $index in products) {\n      var product = products[$index];\n\nbuf.push('<li>' + escape((interp = product.id) == null ? '' : interp) + '</li>');\n   }\n  }\n}).call(this);\n\nbuf.push('</ul></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<form role=\"form\"><div class=\"form-group\"><input id=\"recipe-name\" type=\"text\" required=\"required\" placeholder=\"Nom de la recette\" class=\"form-control\"/></div><div class=\"form-group col-xs-6\"><textarea id=\"recipe-description\" type=\"text\" placeholder=\"Description de la recette\" class=\"form-control\"></textarea></div><div class=\"form-group col-xs-6\"><label for=\"recipe-products\">Produits nécessaires :</label><select id=\"recipe-products\" multiple=\"multiple\" data-live-search=\"true\" class=\"form-control select-picker\">');\n// iterate products\n;(function(){\n  if ('number' == typeof products.length) {\n    for (var $index = 0, $$l = products.length; $index < $$l; $index++) {\n      var product = products[$index];\n\nbuf.push('<option');\nbuf.push(attrs({ 'value':(\"\" + (product.attributes.name) + \"\") }, {\"value\":true}));\nbuf.push('> \\n' + escape((interp = product.attributes.name) == null ? '' : interp) + '</option>');\n    }\n  } else {\n    for (var $index in products) {\n      var product = products[$index];\n\nbuf.push('<option');\nbuf.push(attrs({ 'value':(\"\" + (product.attributes.name) + \"\") }, {\"value\":true}));\nbuf.push('> \\n' + escape((interp = product.attributes.name) == null ? '' : interp) + '</option>');\n   }\n  }\n}).call(this);\n\nbuf.push('</select></div><div class=\"form-group\"><input id=\"recipe-image\" type=\"text\" placeholder=\"adresse de l\\'image\" class=\"form-control\"/></div><div class=\"form-group\"><button type=\"submit\" title=\"ajouter\" class=\"btn btn-default\"><span class=\"glyphicon glyphicon-plus\"></span></button></div></form><ul class=\"recipes\"></ul>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<ul class=\"recipes\"></ul>');\n}\nreturn buf.join(\"\");\n};","var View     = require(\"./view\"),\n    Recipe   = require(\"../models/recipe\"),\n    template = require(\"./templates/recipe\");\n\nmodule.exports = View.extend({\n    \"tagName\": \"li\",\n    \"className\": \"row recipe\",\n    \"template\": template,\n\n    \"model\": Recipe,\n\n    \"getRenderData\": function () { \n        var attributes = this.model.attributes;\n        if (!attributes.image) {\n            attributes.image = \"images/recipe.png\";\n        }\n        if (attributes.description) {\n            attributes.description = \n                attributes.description.replace(/[\\r\\n]+/g, \"<br>\");\n        }\n        return attributes;\n    },\n\n    \"initialize\": function () {\n        this.render();\n    },\n\n    \"events\": {\n        \"click .delete\": \"destroy\",\n    },\n\n    \"destroy\": function () {\n        var that = this;\n\n        this.model.save({ \"toCook\": false }, {\n            \"success\": function () {\n                that.remove();\n            }\n        });\n    }\n\n});\n\n","var View       = require(\"./view\"),\n    Recipe     = require(\"../models/recipe\"),\n    ToCook     = require(\"../models/to_cook\"),\n    ToCookView = require(\"./to_cook\"),\n    template   = require(\"./templates/to_cooks\");\n\nmodule.exports = View.extend({\n    \"collection\": ToCook,\n    \n    \"template\": template,\n\n    \"render\": function () {\n        var that = this;\n        this.$el.html(this.template(this.getRenderData()));\n\n        this.recipeList = this.$el.find(\"ul.recipes\");\n        this.collection.each(function (recipe){\n            that.add(recipe);\n        });\n    },\n\n    \"updateRender\": function (swiper) {\n        var that = this,\n            $recipes = this.$el.find(\"ul.recipes\");\n\n        that.$el.find(\"ul.recipes\").html(\"\");\n        that.collection.fetch({\n            \"success\": function (collection) {\n                that.collection = collection;\n                that.height = 0;\n                collection.each(function (recipe){\n                    that.add(recipe);\n                });\n                // TODO: see how to solve this :\n                // idangerous doesnt update his heigth after dom change ...\n                $recipes.height(that.height);\n                $recipes.parents(\".swiper-slide\").height(that.height + 500);\n                $recipes.parents(\".swiper-wrapper\").height(that.height + 500);\n                swiper.resizeFix();\n            }\n        });\n    },\n\n    \"add\": function (recipe) {\n        var recipeView = new ToCookView({ \"model\": recipe }),\n            $recipes = this.recipesList;\n        $recipes.prepend(recipeView.el);\n\n        this.height = this.height + recipeView.$el.height();\n    },\n});\n","require('lib/view_helper');\n\n// Base class for all views.\nmodule.exports = Backbone.View.extend({\n    \"initialize\": function () {\n        this.render = _.bind(this.render, this);\n    },\n\n    \"template\": function () { return null; },\n    \"getRenderData\": function () { return null; },\n\n    \"render\": function () {\n        this.$el.html(this.template(this.getRenderData()));\n        this.afterRender();\n        return this;\n    },\n\n    \"afterRender\": function () { return null; }\n});\n"]}